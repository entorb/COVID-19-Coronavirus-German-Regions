<!doctype html>
<html lang="de">

<head>
  <title>COVID-19 Landkreis Benachrichtigung - Anmeldung</title>
  <meta charset="utf-8">
  <meta name="author" content="Dr. Torben Menke">
  <link rel="stylesheet" href="/style.css" />
  <script src="./js/jquery-3.5.0.min.js"></script>
</head>

<body>

  <h1>COVID-19 Landkreis Benachrichtigung - Anmeldung</h1>

  <h2>Info</h2>
  <ul>
    <li>Inhalt der E-Mail Benachrichtigung: Daten zu den vom Abonnenten ausgewählten Landkreisen</li>
    <li>Datenquelle: RKI Dashboard, wie auch meine anderen <a href="https://entorb.net/COVID-19-coronavirus/" target="_blank">COVID-19 Auswertungen</a></li>
    <li>Sendefrequenz: Wahlweise täglich, sonntäglich oder bei Erreichen eines Grenzwertes</li>
    <li>Versand erfolgt um 7:30 Uhr</li>
    <li>Die hinterlegten E-Mail Adressen werden natürlich für keine anderen Zwecke verwendet oder gar weitergegeben</li>
    <li>Quellcode ist OpenSource und ist bei <a href="https://github.com/entorb/COVID-19-Coronavirus-German-Regions/tree/master/newsletter" target="_blank">GitHub veröffentlicht</a></li>
  </ul>

  <h2>Anmeldung</h2>

  <p> E-Mail: <input type="email" id="email" name="email">
    <button id="submit" onclick="submitFunction()">Anmelden</button>
  </p>

  <h2>Beispiel E-Mail</h2>
  <img src="newsletter-screenshot-2-mail.png" width="512" height="428" style="border: 5px solid #555;" alt="newsletter-screenshot-2-mail.png">

  <h2>Feedback</h2>
  <ul>
    <li> Jona: Ich finde das Teil echt klasse [...] und erhalte so jeden Tag meine Übersicht - das ist das erste Mal, dass ich das Gefühl habe die ganze Corona-Geschichte wirklich vernünftig einschätzen zu können. Großes Danke hierfür! </li>
  </ul>
  <!-- <br /> -->
  <script>

    var input_email = document.getElementById("email");
    input_email.addEventListener("keydown", function (e) {
      // Enter is pressed
      if (e.keyCode === 13) {
        event.preventDefault();
        submitFunction();
      }
    }, false);

    function submitFunction() {
      $.get("https://entorb.net/COVID-19-coronavirus/newsletter-backend.py", { action: "subscribe", email: input_email.value },
        function (response) {
          console.log("reply:")
          console.log(response);
          if (response.status = "ok") {
            alert("Bestätigungs E-Mail ist unterwegs und enthält den Link zur Konfigurationsseite")
          }
        }
      );
    }

  </script>
  <!-- Footer -->
  <hr>
  <a href="/">Home</a> - <a href="/contact.php?origin=COVID-19">Contact</a> - <a href="/impressum.php">Impressum</a>
</body>

</html>